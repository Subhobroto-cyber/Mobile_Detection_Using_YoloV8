<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ObjectInsight | AI-Powered Object Detection</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #f97316;
            --text: #1f2937;
            --text-light: #6b7280;
            --bg: #f9fafb;
            --bg-card: #ffffff;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --border: #e5e7eb;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Roboto', sans-serif;
        }
        
        body {
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background-color: var(--bg-card);
            padding: 1.25rem;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .container {
            width: 100%;
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .logo svg {
            margin-right: 0.75rem;
        }
        
        .main-container {
            flex: 1;
            padding: 2rem 0;
        }
        
        .card {
            background-color: var(--bg-card);
            border-radius: 0.75rem;
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 2rem;
        }
        
        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }
        
        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.5rem;
        }
        
        .card-subtitle {
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        .upload-area {
            border: 2px dashed var(--border);
            border-radius: 0.5rem;
            padding: 3rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .upload-area:hover {
            border-color: var(--primary);
            background-color: rgba(99, 102, 241, 0.05);
        }
        
        .upload-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .upload-text {
            font-size: 1.125rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .upload-subtext {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-bottom: 1rem;
        }
        
        .upload-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .upload-btn:hover {
            background-color: var(--primary-dark);
        }
        
        .hidden {
            display: none;
        }
        
        .config-area {
            margin-top: 2rem;
        }
        
        .option-title {
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1rem;
        }
        
        .option-card {
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .option-card.selected {
            border-color: var(--primary);
            background-color: rgba(99, 102, 241, 0.05);
        }
        
        .option-card.selected::after {
            content: "✓";
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: var(--primary);
            color: white;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }
        
        .option-name {
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        
        .option-desc {
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .action-btn {
            margin-top: 2rem;
            text-align: center;
        }
        
        .detect-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 0.375rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .detect-btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
        }

        .detect-btn:disabled {
            background-color: var(--text-light);
            cursor: not-allowed;
        }
        
        .results-area {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .image-result {
            width: 100%;
            height: auto;
            max-height: 550px;
            object-fit: contain;
            border-radius: 0.5rem;
            background-color: var(--bg);
        }
        
        .result-stats {
            display: flex;
            align-items: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .stat-value {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .result-table th {
            text-align: left;
            padding: 0.75rem;
            border-bottom: 2px solid var(--border);
            font-weight: 600;
        }
        
        .result-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
        }
        
        .result-table tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }
        
        .confidence-badge {
            background-color: #ecfdf5;
            color: #10b981;
            padding: 0.25rem 0.5rem;
            border-radius: 1rem;
            font-weight: 500;
            font-size: 0.75rem;
        }

        .low-confidence {
            background-color: #fff1f2;
            color: #f43f5e;
        }

        .med-confidence {
            background-color: #fff7ed;
            color: #f97316;
        }
        
        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--secondary);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            margin-top: 1.5rem;
        }
        
        .download-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid white;
            width: 18px;
            height: 18px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 8h1a4 4 0 1 1 0 8h-1"></path>
                        <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"></path>
                        <line x1="6" y1="2" x2="6" y2="4"></line>
                        <line x1="10" y1="2" x2="10" y2="4"></line>
                        <line x1="14" y1="2" x2="14" y2="4"></line>
                    </svg>
                    ObjectInsight
                </div>
            </div>
        </div>
    </header>

    <main class="main-container">
        <div class="container">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">AI-Powered Object Detection</h2>
                    <p class="card-subtitle">Detect and analyze objects in images using YOLOv8 models</p>
                </div>
                <div class="card-body">
                    <div id="upload-section">
                        <input type="file" id="file-input" class="hidden" accept="image/*">
                        <div class="upload-area" id="upload-area">
                            <div class="upload-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="17 8 12 3 7 8"></polyline>
                                    <line x1="12" y1="3" x2="12" y2="15"></line>
                                </svg>
                            </div>
                            <h3 class="upload-text">Upload an image</h3>
                            <p class="upload-subtext">Drag and drop your image here, or click to browse</p>
                            <button class="upload-btn">Select Image</button>
                        </div>

                        <div id="preview-area" class="hidden" style="margin-top: 1rem;">
                            <img id="preview-image" style="max-width: 100%; max-height: 300px; display: block; margin: 0 auto; border-radius: 0.5rem;">
                            <div style="text-align: center; margin-top: 1rem;">
                                <p id="filename-display" style="font-weight: 500;"></p>
                                <button id="change-image" class="upload-btn" style="background-color: transparent; color: var(--primary); margin-top: 0.5rem;">Change Image</button>
                            </div>
                        </div>

                        <div class="config-area">
                            <h3 class="option-title">Detection Configuration</h3>
                            <div class="options">
                                <div class="option-card" data-option="1">
                                    <h4 class="option-name">Quick Detection</h4>
                                    <p class="option-desc">Smaller model, faster processing, good for basic scenes</p>
                                </div>
                                <div class="option-card selected" data-option="2">
                                    <h4 class="option-name">Standard Detection</h4>
                                    <p class="option-desc">Balanced performance and accuracy for most images</p>
                                </div>
                                <div class="option-card" data-option="3">
                                    <h4 class="option-name">Accurate Detection</h4>
                                    <p class="option-desc">Larger model, slower but more precise detection</p>
                                </div>
                                <div class="option-card" data-option="4">
                                    <h4 class="option-name">Highest Sensitivity</h4>
                                    <p class="option-desc">Detect smallest objects possible, very sensitive</p>
                                </div>
                            </div>
                        </div>

                        <div class="action-btn">
                            <button id="detect-btn" class="detect-btn" disabled>
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M2 12a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5c0-8-14-8-14-4m0 4c0-8-14-8-14-4"></path>
                                </svg>
                                Start Detection
                            </button>
                        </div>
                    </div>

                    <div id="loading-section" class="hidden" style="text-align: center; padding: 3rem 0;">
                        <div style="margin-bottom: 1.5rem;">
                            <div class="spinner" style="width: 48px; height: 48px; border-width: 5px; margin: 0 auto;"></div>
                        </div>
                        <h3 style="font-weight: 600; margin-bottom: 0.5rem;">Processing Your Image</h3>
                        <p style="color: var(--text-light);" id="loading-text">Loading YOLOv8 model...</p>
                    </div>

                    <div id="results-section" class="hidden">
                        <div class="results-area">
                            <img id="result-image" class="image-result">
                            
                            <div class="result-stats">
                                <div class="stat-item">
                                    <div class="stat-value" id="objects-count">0</div>
                                    <div class="stat-label">Objects Detected</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="classes-count">0</div>
                                    <div class="stat-label">Unique Classes</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="confidence-avg">0%</div>
                                    <div class="stat-label">Avg. Confidence</div>
                                </div>
                            </div>
                            
                            <div>
                                <h3 style="margin-bottom: 1rem; font-weight: 600;">Detection Results</h3>
                                <div style="overflow-x: auto;">
                                    <table class="result-table">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>Object</th>
                                                <th>Confidence</th>
                                                <th>Size (px)</th>
                                                <th>Area (px²)</th>
                                            </tr>
                                        </thead>
                                        <tbody id="results-tbody">
                                            <!-- Results will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div style="text-align: center; margin-top: 2rem;">
                                    <button id="download-btn" class="download-btn">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                            <polyline points="7 10 12 15 17 10"></polyline>
                                            <line x1="12" y1="15" x2="12" y2="3"></line>
                                        </svg>
                                        Download Annotated Image
                                    </button>
                                    <button id="start-over" class="upload-btn" style="background-color: transparent; color: var(--primary); margin-left: 1rem;">
                                        Start Over
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Mock implementation to simulate the functionality
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('file-input');
            const uploadArea = document.getElementById('upload-area');
            const previewArea = document.getElementById('preview-area');
            const previewImage = document.getElementById('preview-image');
            const filenameDisplay = document.getElementById('filename-display');
            const changeImageBtn = document.getElementById('change-image');
            const detectBtn = document.getElementById('detect-btn');
            const optionCards = document.querySelectorAll('.option-card');
            const uploadSection = document.getElementById('upload-section');
            const loadingSection = document.getElementById('loading-section');
            const resultsSection = document.getElementById('results-section');
            const loadingText = document.getElementById('loading-text');
            const resultImage = document.getElementById('result-image');
            const objectsCount = document.getElementById('objects-count');
            const classesCount = document.getElementById('classes-count');
            const confidenceAvg = document.getElementById('confidence-avg');
            const resultsTbody = document.getElementById('results-tbody');
            const downloadBtn = document.getElementById('download-btn');
            const startOverBtn = document.getElementById('start-over');
            
            let selectedOption = "2";
            let uploadedFile = null;
            
            // Handle file upload
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });
            
            // Drag and drop functionality
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--primary)';
                uploadArea.style.backgroundColor = 'rgba(99, 102, 241, 0.05)';
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.style.borderColor = 'var(--border)';
                uploadArea.style.backgroundColor = 'transparent';
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = 'var(--border)';
                uploadArea.style.backgroundColor = 'transparent';
                
                if (e.dataTransfer.files.length) {
                    handleFile(e.dataTransfer.files[0]);
                }
            });
            
            fileInput.addEventListener('change', () => {
                if (fileInput.files.length) {
                    handleFile(fileInput.files[0]);
                }
            });
            
            function handleFile(file) {
                // Only accept image files
                if (!file.type.startsWith('image/')) {
                    alert('Please upload an image file');
                    return;
                }
                
                uploadedFile = file;
                const reader = new FileReader();
                
                reader.onload = (e) => {
                    previewImage.src = e.target.result;
                    filenameDisplay.textContent = file.name;
                    previewArea.classList.remove('hidden');
                    uploadArea.classList.add('hidden');
                    detectBtn.disabled = false;
                };
                
                reader.readAsDataURL(file);
            }
            
            changeImageBtn.addEventListener('click', () => {
                previewArea.classList.add('hidden');
                uploadArea.classList.remove('hidden');
                detectBtn.disabled = true;
                uploadedFile = null;
                fileInput.value = '';
            });
            
            // Configuration options
            optionCards.forEach((card) => {
                card.addEventListener('click', () => {
                    optionCards.forEach((c) => c.classList.remove('selected'));
                    card.classList.add('selected');
                    selectedOption = card.dataset.option;
                });
            });
            
            // Detection process
            detectBtn.addEventListener('click', () => {
                if (!uploadedFile) return;
                
                // Show loading
                uploadSection.classList.add('hidden');
                loadingSection.classList.remove('hidden');
                
                // Simulate loading process
                simulateDetection();
            });
            
            // Simulate the detection process
            function simulateDetection() {
                const steps = [
                    "Loading YOLOv8 model...",
                    "Preparing image for processing...",
                    "Running object detection...",
                    "Analyzing results...",
                    "Generating annotated image..."
                ];
                
                let currentStep = 0;
                
                const interval = setInterval(() => {
                    loadingText.textContent = steps[currentStep];
                    currentStep++;
                    
                    if (currentStep >= steps.length) {
                        clearInterval(interval);
                        setTimeout(() => {
                            loadingSection.classList.add('hidden');
                            resultsSection.classList.remove('hidden');
                            showResults();
                        }, 1000);
                    }
                }, 800);
            }
            
            // Show detection results
            function showResults() {
                // Display the annotated image (using the same image for demo)
                resultImage.src = previewImage.src;
                
                // Generate mock results
                const mockResults = generateMockResults();
                
                // Update stats
                objectsCount.textContent = mockResults.length;
                
                // Count unique classes
                const uniqueClasses = new Set(mockResults.map(item => item.class));
                classesCount.textContent = uniqueClasses.size;
                
                // Calculate average confidence
                const avgConfidence = mockResults.reduce((sum, item) => sum + item.confidence, 0) / mockResults.length;
                confidenceAvg.textContent = `${avgConfidence.toFixed(1)}%`;
                
                // Populate results table
                resultsTbody.innerHTML = '';
                mockResults.forEach((result, index) => {
                    const row = document.createElement('tr');
                    
                    // Determine confidence class
                    let confidenceClass = '';
                    if (result.confidence < 40) {
                        confidenceClass = 'low-confidence';
                    } else if (result.confidence < 70) {
                        confidenceClass = 'med-confidence';
                    }
                    
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${result.class}</td>
                        <td><span class="confidence-badge ${confidenceClass}">${result.confidence}%</span></td>
                        <td>${result.width}×${result.height}</td>
                        <td>${result.area}</td>
                    `;
                    
                    resultsTbody.appendChild(row);
                });
            }
            
            // Generate mock detection results based on selected option
            function generateMockResults() {
                const commonObjects = [
                    'person', 'car', 'dog', 'cat', 'chair', 'bottle', 'laptop', 
                    'book', 'cup', 'cell phone', 'bicycle', 'backpack'
                ];
                
                const results = [];
                let numObjects;
                
                // Determine number of objects based on selected option
                switch (selectedOption) {
                    case "1": // Quick
                        numObjects = 3 + Math.floor(Math.random() * 3); // 3-5
                        break;
                    case "2": // Standard
                        numObjects = 5 + Math.floor(Math.random() * 4); // 5-8
                        break;
                    case "3": // Accurate
                        numObjects = 7 + Math.floor(Math.random() * 5); // 7-11
                        break;
                    case "4": // Sensitive
                        numObjects = 10 + Math.floor(Math.random() * 6); // 10-15
                        break;
                    default:
                        numObjects = 5;
                }
                
                // Generate random results
                for (let i = 0; i < numObjects; i++) {
                    const width = 50 + Math.floor(Math.random() * 200);
                    const height = 50 + Math.floor(Math.random() * 200);
                    
                    results.push({
                        class: commonObjects[Math.floor(Math.random() * commonObjects.length)],
                        confidence: Math.floor(30 + Math.random() * 70), // 30-99%
                        width: width,
                        height: height,
                        area: width * height
                    });
                }
                
                // Sort by area (smallest first)
                return results.sort((a, b) => a.area - b.area);
            }
            
            // Download button (simulated)
            downloadBtn.addEventListener('click', () => {
                alert('In a real implementation, this would download the annotated image.');
            });
            
            // Start over button
            startOverBtn.addEventListener('click', () => {
                resultsSection.classList.add('hidden');
                uploadSection.classList.remove('hidden');
                previewArea.classList.add('hidden');
                uploadArea.classList.remove('hidden');
                detectBtn.disabled = true;
                uploadedFile = null;
                fileInput.value = '';
            });
        });
    </script>
</body>
</html>